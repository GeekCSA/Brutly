//
// Created by moshe on 16/10/2023.
//

#pragma once

#ifndef UNTITLED_EXPLOITER_H
#define UNTITLED_EXPLOITER_H

#include <string>
#include <cstring>

#include "ShellCommander.h"
#include "../../Commons/Header/Exception.h"

class Exploiter {
public:

    //TODO: Add const word in the correct place
    virtual int run(size_t argc, const std::string argv[]) = 0;

    virtual std::string fillCmdTemplate(const std::string& var1, const std::string& command) noexcept(false) final {

        std::string result;

        // Find and replace "{0}" with var1
        size_t posTempPlace = command.find("{0}");
        if (posTempPlace != std::string::npos) {
            result = command.substr(0,posTempPlace);
            result += var1;
            result += command.substr(posTempPlace + 3); // Skip the "{0}"
        }else{
            throw invalidCommandException("The command template does not contain a temp-place in format of {0} for a variable value");
        }

        return result;
    }
};

#endif //UNTITLED_EXPLOITER_H
